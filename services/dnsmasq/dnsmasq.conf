# Configuration file for dnsmasq.
#
# Format is one option per line, legal options are the same
# as the long options legal on the command line. See
# "/usr/local/sbin/dnsmasq --help" or "man 8 dnsmasq" for details.
# Never forward plain names (without a dot or domain part)

# Listen only on localhost

listen-address={{ grains.get('dev_setup:lessonly_dev_ip_base', '127.0.0.2') }}
{%if grains['os_family']=='Debian' %}
interface=lo:1
bind-interfaces
{% endif %}

# If you don't want dnsmasq to read /etc/resolv.conf or any other
# file, getting its servers from this file instead (see below), then
# uncomment this.
no-resolv

# If you don't want dnsmasq to poll /etc/resolv.conf or other resolv
# files for changes and re-read them then uncomment this.

#
# Serve wildcard to loopback
#
address=/lessonly.test/{{grains.get("dev_setup:lessonly_dev_ip_base","127.0.0.2")}}
